var refresher={norefresh:!1,info:{pullDownLable:"下拉刷新",pullingDownLable:"释放立即刷新",pullUpLable:"上拉加载更多",pullingUpLable:"释放加载更多",loadingLable:"加载中..."},init:function(e){e.norefresh&&(refresher.norefresh=e.norefresh);var l=document.getElementById(e.id),t=document.createElement("div");t.className="scroller",l.appendChild(t);var a=l.querySelector(".scroller"),r=l.querySelector("#"+e.id+" ul");a.insertBefore(r,a.childNodes[0]);var s=document.createElement("div");s.className="pullDown";var n=document.createElement("div");n.className="pullDownIcon",s.appendChild(n);var o=document.createElement("div");o.className="pullDownLabel",s.appendChild(o),a.insertBefore(s,a.childNodes[0]);var c=document.createElement("div");c.className="pullUp",(n=document.createElement("div")).className="pullUpIcon",c.appendChild(n);var i=document.createElement("div");i.className="pullUpLabel";var p=document.createTextNode(refresher.info.pullUpLable);i.appendChild(p),c.appendChild(i),a.appendChild(c);var m=l.querySelector(".pullDown"),u=m.offsetHeight,d=l.querySelector(".pullUp"),f=d.offsetHeight;this.scrollIt(e,m,u,d,f)},scrollIt:function(parameter,pullDownEle,pullDownOffset,pullUpEle,pullUpOffset){eval(parameter.id+"= new iScroll(\t\t\t\t\t\t\t\t\tparameter.id,\t\t\t\t\t\t\t\t\t {\t\t\t\t\t\t\t\t\t\t useTransition: true,\t\t\t\t\t\t\t\t\t\t vScrollbar: false,\t\t\t\t\t\t\t\t\t\t topOffset: pullDownOffset,\t\t\t\t\t\t\t\t\t\t onRefresh: function () {\t\t\t\t\t\t\t\t\t\t\t\t\t\t  refresher.onRelease(pullDownEle,pullUpEle);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t },\t\t\t\t\t\t\t\t\t\tonScrollMove: function () {\t\t\t\t\t\t\t\t\t\t\t\t\t\t     refresher.onScrolling(this,pullDownEle,pullUpEle,pullUpOffset);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\t\t\t\t\t\t\t\t\t\tonScrollEnd: function () {\t\t\t\t\t\t\t\t\t\t\t\t\t       refresher.onScrollEnd(pullDownEle,parameter.pullDownAction,pullUpEle,parameter.pullUpAction);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t})")},onScrolling:function(e,l,t,a){refresher.norefresh?(e.y>-a&&!l.className.match("loading")&&(e.scrollerH<e.wrapperH&&e.y>e.maxScrollY-a&&t.className.match("flip")||e.scrollerH>e.wrapperH&&e.y>e.maxScrollY-a&&t.className.match("flip"))&&(t.classList.remove("flip"),t.querySelector(".pullUpLabel").innerHTML=refresher.info.pullUpLable),(e.scrollerH<e.wrapperH&&e.y<e.minScrollY-a&&!l.className.match("loading")&&!t.className.match("loading")||e.scrollerH>e.wrapperH&&e.y<e.maxScrollY-a&&!l.className.match("loading")&&!t.className.match("loading"))&&(t.classList.add("flip"),t.querySelector(".pullUpLabel").innerHTML=refresher.info.pullingUpLable)):(e.y>-a&&!l.className.match("loading")&&(l.classList.remove("flip"),l.querySelector(".pullDownLabel").innerHTML=refresher.info.pullDownLable,l.querySelector(".pullDownIcon").style.display="block",e.minScrollY=-a),(e.scrollerH<e.wrapperH&&e.y>e.maxScrollY-a&&t.className.match("flip")||e.scrollerH>e.wrapperH&&e.y>e.maxScrollY-a&&t.className.match("flip"))&&(t.classList.remove("flip"),t.querySelector(".pullUpLabel").innerHTML=refresher.info.pullUpLable),e.y>0&&!t.className.match("loading")&&!l.className.match("loading")&&(l.classList.add("flip"),l.querySelector(".pullDownLabel").innerHTML=refresher.info.pullingDownLable,e.minScrollY=0),(e.scrollerH<e.wrapperH&&e.y<e.minScrollY-a&&!l.className.match("loading")&&!t.className.match("loading")||e.scrollerH>e.wrapperH&&e.y<e.maxScrollY-a&&!l.className.match("loading")&&!t.className.match("loading"))&&(t.classList.add("flip"),t.querySelector(".pullUpLabel").innerHTML=refresher.info.pullingUpLable))},onRelease:function(e,l){refresher.norefresh?l.className.match("loading")&&(l.classList.toggle("loading"),l.querySelector(".pullUpLabel").innerHTML=refresher.info.pullUpLable):(e.className.match("loading")&&(e.classList.toggle("loading"),e.querySelector(".pullDownLabel").innerHTML=refresher.info.pullDownLable),l.className.match("loading")&&(l.classList.toggle("loading"),l.querySelector(".pullUpLabel").innerHTML=refresher.info.pullUpLable))},onScrollEnd:function(e,l,t,a){refresher.norefresh?t.className.match("flip")&&!t.className.match("loading")&&(t.classList.add("loading"),t.classList.remove("flip"),t.querySelector(".pullUpLabel").innerHTML=refresher.info.loadingLable,a&&a()):(e.className.match("flip")&&!e.className.match("loading")&&(e.classList.add("loading"),e.classList.remove("flip"),e.querySelector(".pullDownLabel").innerHTML=refresher.info.loadingLable,l&&l()),t.className.match("flip")&&!t.className.match("loading")&&(t.classList.add("loading"),t.classList.remove("flip"),t.querySelector(".pullUpLabel").innerHTML=refresher.info.loadingLable,a&&a()))}};